$Id$

1. Prepare to work.

  In order to prepare package hasher to use by USER, pair of special
  satellite users must be added.  System administrator should run
	# hasher-useradd USER

  This command creates two additional satellite users, USER_a and
  USER_b, and adds USER to groups: hashman, USER_a and USER_b.

  See hasher-useradd(8) manpage for details.

  Note that USER have to (re)login to gain new credentials.

2. Usage.

  The package hasher consists of several low-level utilities placed in
  /usr/share/hasher/, and two high-level utilities, hsh(1) and mkaptbox(1).

  Example of use:
  $ hsh workdir path/to/foobar-1.0.src.rpm

  Working directory ("workdir" in example above) MUST exist.

  Working directory shouldn't contain self-made files or directories
  with reserved names "aptbox", "cache", "chroot", "lockdir" and "repo".

  During the work hasher creates work repository, workdir/repo.
  Result of successful builds will be placed into this repository.

  Most useful options:
    --without-stuff
    Do not use packages from auto repository in build system.
    By default, auto repository will be used as well as system repository.

    --nprocs=NUMBER
    Number of CPUs to use.
    By default, number of CPUs is calculated using /proc/stat data.

    -v, --verbose
    Print a message for each action.  Useful for tracing and/or
    getting detailed progress information.

  See hsh(1) manpage for detailed information about valid options.

3. Requirements.

  File system where workdir is located should not be mounted with
  "noexec" or "nodev" options.

  Package repository used for creating build system must provide
  following packages:
    fakeroot >= 0:0.7.3
      (required for proper TCB support);
    fakeroot >= 0:1.2-alt3
      (required for --safe-fakeroot support);
    rpm-build >= 0:4.0.4-alt21
      (required for proper package contents indices support);
    sisyphus_check>=0:0.7.3
      (required for executing sisyphus_check inside chroot);
    kernel-headers-common >= 1.1.4-alt1
      (required for "adjust_kernel_headers --first" support).

4. Caveats and limitations.

  Only local apt source methods (i.e. file and copy) are supported.

  Depending on age of package repository, apt installed in your host system
  will or will not work properly.  In case of essential difference between
  apt versions in host system and repository, consider --apt-prefix option.

5. Reporting bugs.

  Report bugs to http://bugs.altlinux.ru/.
